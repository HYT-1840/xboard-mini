#!/bin/bash
# Xboard-Mini æœåŠ¡æ§åˆ¶è„šæœ¬ï¼ˆé€‚é…PHP8.3ï¼ŒARM/x86å…¨å…¼å®¹ï¼‰
INSTALL_DIR="/opt/xboard-mini"
PHP_VERSION="8.3"

# é¢œè‰²è¾“å‡º
green() { echo -e "\033[32m$1\033[0m"; }
red() { echo -e "\033[31m$1\033[0m"; }
blue() { echo -e "\033[36m$1\033[0m"; }

# æœåŠ¡æ§åˆ¶é€»è¾‘
case "$1" in
    start)
        systemctl start nginx php${PHP_VERSION}-fpm
        green "âœ… Xboard-mini æœåŠ¡å·²æˆåŠŸå¯åŠ¨"
        ;;
    stop)
        systemctl stop nginx php${PHP_VERSION}-fpm
        red "âŒ Xboard-mini æœåŠ¡å·²æˆåŠŸåœæ­¢"
        ;;
    restart)
        systemctl restart nginx php${PHP_VERSION}-fpm
        blue "ğŸ”„ Xboard-mini æœåŠ¡å·²æˆåŠŸé‡å¯"
        ;;
    status)
        blue "ğŸ“Š Xboard-mini æœåŠ¡è¿è¡ŒçŠ¶æ€ï¼š"
        systemctl status nginx php${PHP_VERSION}-fpm --no-pager
        ;;
    logs)
        blue "ğŸ“‹ Xboard-mini æœ€è¿‘30æ¡é”™è¯¯æ—¥å¿—ï¼š"
        tail -n 30 /var/log/nginx/xboard-mini-error.log
        ;;
    *)
        echo "ğŸ“š ç”¨æ³•ï¼šxboard-mini start|stop|restart|status|logs"
        echo "ğŸ’¡ ç¤ºä¾‹ï¼šxboard-mini restart ï¼ˆé‡å¯é¢æ¿æœåŠ¡ï¼Œè§£å†³å†…å­˜å ç”¨è¿‡é«˜ï¼‰"
        ;;
esac
