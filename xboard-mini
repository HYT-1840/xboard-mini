#!/bin/bash
# è‡ªåŠ¨ä»é…ç½®è¯»å–ç‰ˆæœ¬ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹
PHP_VERSION=$(grep -Po 'PHP_VERSION="\K[0-9.]+' /usr/local/bin/xboard-mini | head -1)
[[ -z "$PHP_VERSION" ]] && PHP_VERSION="8.3"
INSTALL_DIR="/opt/xboard-mini"

green() { echo -e "\033[32m$1\033[0m"; }
red() { echo -e "\033[31m$1\033[0m"; }
blue() { echo -e "\033[36m$1\033[0m"; }

case "$1" in
    start)
        systemctl start nginx php${PHP_VERSION}-fpm
        green "âœ… å·²å¯åŠ¨"
        ;;
    stop)
        systemctl stop nginx php${PHP_VERSION}-fpm
        red "âŒ å·²åœæ­¢"
        ;;
    restart)
        systemctl restart nginx php${PHP_VERSION}-fpm
        blue "ğŸ”„ å·²é‡å¯"
        ;;
    status)
        systemctl status nginx php${PHP_VERSION}-fpm --no-pager
        ;;
    logs)
        tail -n 30 /var/log/nginx/xboard-mini-error.log
        ;;
    *)
        echo "ç”¨æ³•ï¼šxboard-mini start|stop|restart|status|logs"
        ;;
esac
